#!/usr/bin/env bash
# Pre-commit hook to prevent emoji usage in RAG-CLI codebase
#
# Installation:
#   git config core.hooksPath .githooks
#
# Or copy to .git/hooks/pre-commit:
#   cp .githooks/pre-commit .git/hooks/pre-commit
#   chmod +x .git/hooks/pre-commit

set -e

echo "Running pre-commit checks..."

# Get the project root directory
PROJECT_ROOT="$(git rev-parse --show-toplevel)"

# Run emoji validation
if ! python "${PROJECT_ROOT}/scripts/validate_no_emojis.py"; then
    echo ""
    echo "ERROR: Emoji characters detected in staged files."
    echo "Please remove emojis before committing."
    echo "Run: python scripts/remove_emojis.py"
    echo ""
    exit 1
fi

echo "Pre-commit checks passed!"
exit 0
